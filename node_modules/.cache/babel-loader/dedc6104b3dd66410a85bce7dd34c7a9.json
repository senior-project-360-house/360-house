{"ast":null,"code":"import _classCallCheck from \"C:\\\\Users\\\\nguye\\\\Downloads\\\\New folder\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:\\\\Users\\\\nguye\\\\Downloads\\\\New folder\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"C:\\\\Users\\\\nguye\\\\Downloads\\\\New folder\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"C:\\\\Users\\\\nguye\\\\Downloads\\\\New folder\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"C:\\\\Users\\\\nguye\\\\Downloads\\\\New folder\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"C:\\\\Users\\\\nguye\\\\Downloads\\\\New folder\\\\src\\\\components\\\\Agent\\\\MessageRequest.js\";\nimport { withFirebase } from \"../../server/Firebase/index\";\nimport React, { Component } from \"react\";\nimport { Button, Card, Image } from \"semantic-ui-react\";\nimport \"./style.css\";\nimport _ from 'lodash';\n\nvar Request =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(Request, _React$Component);\n\n  function Request(props) {\n    var _this;\n\n    _classCallCheck(this, Request);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Request).call(this, props));\n\n    _this.componentDidMount = function () {\n      var user = JSON.parse(localStorage.getItem('authUser'));\n\n      _this.props.firebase.getReviewList(user.uid).then(function (result) {\n        return _this.setState({\n          requests: result,\n          user: user\n        });\n      });\n    };\n\n    _this.onAllowClick = function (event, value) {\n      var allowList = [];\n      var request = value.value;\n      var getHouseAllowList = new Promise(function (resolve, reject) {\n        _this.props.firebase.house(request.house.id).once('value').then(function (snapshot) {\n          var item = snapshot.val();\n\n          if (item.allowList) {\n            item.allowList.forEach(function (allow) {\n              return allowList.push(allow);\n            });\n            console.log(allowList);\n          }\n\n          resolve();\n        }).catch(function (err) {\n          return reject(err);\n        });\n      });\n      getHouseAllowList.then(function () {\n        allowList.push(request.buyer.id);\n        var updates = {};\n        updates[\"houses/\".concat(request.house.id) + '/allowList'] = allowList;\n\n        _this.props.firebase.database.ref().update(updates);\n\n        console.log(\"Successfully add allow view\");\n      });\n    };\n\n    _this.onDeleteClick = function (event, value) {\n      var reviewID = value.value.id;\n      console.log(reviewID);\n\n      _this.props.firebase.user(_this.state.user.uid).once('value').then(function (snapshot) {\n        var reviewList = snapshot.val().reviewList;\n\n        var newreviewList = _.remove(reviewList, reviewID);\n\n        var updates = {};\n        console.log(newreviewList);\n        updates[\"users/\".concat(_this.state.user.uid) + '/reviewList'] = newreviewList;\n\n        _this.props.firebase.database.ref().update(updates);\n\n        console.log(\"Successfully delete review list\");\n\n        var newreviewstate = _.remove(_this.state.requests, {\n          id: reviewID\n        });\n\n        _this.setState({\n          request: newreviewstate\n        });\n      });\n    };\n\n    _this.state = {\n      requests: [],\n      user: {}\n    };\n    return _this;\n  }\n\n  _createClass(Request, [{\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      return React.createElement(\"div\", {\n        className: \"MessageRequest container\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 69\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"ListMessage\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 70\n        },\n        __self: this\n      }, React.createElement(Card.Group, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 71\n        },\n        __self: this\n      }, this.state.requests.map(function (request) {\n        return React.createElement(Card, {\n          id: request.id,\n          fluid: true,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 73\n          },\n          __self: this\n        }, React.createElement(Card.Content, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 74\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          className: \"TopMessage\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 75\n          },\n          __self: this\n        }, React.createElement(Image, {\n          className: \"ImageMessage\",\n          src: \"http://davidrhysthomas.co.uk/img/dexter.png\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 77\n          },\n          __self: this\n        }), React.createElement(\"span\", {\n          className: \"DateMessage\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 81\n          },\n          __self: this\n        }, \"3 days ago\")), React.createElement(Card.Header, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 84\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          className: \"HeaderMessage\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 85\n          },\n          __self: this\n        }, React.createElement(\"span\", {\n          className: \"NameMessage\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 86\n          },\n          __self: this\n        }, request.buyer.email))), React.createElement(Card.Meta, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 89\n          },\n          __self: this\n        }, \"Membership User or Non Membership User\"), React.createElement(Card.Description, {\n          className: \"AMessage\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 90\n          },\n          __self: this\n        }, React.createElement(\"p\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 91\n          },\n          __self: this\n        }, \"Hello, I would like to view morw images and 3D render of the house.\", React.createElement(\"strong\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 94\n          },\n          __self: this\n        }, \"Please let me see it. Thank you\")))), React.createElement(Card.Content, {\n          extra: true,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 98\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          className: \"ListButton\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 99\n          },\n          __self: this\n        }, React.createElement(Button, {\n          basic: true,\n          color: \"green\",\n          value: request,\n          onClick: _this2.onAllowClick.bind(_this2),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 100\n          },\n          __self: this\n        }, \"Approve\"), React.createElement(Button, {\n          basic: true,\n          color: \"red\",\n          value: request,\n          onClick: _this2.onDeleteClick.bind(_this2),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 103\n          },\n          __self: this\n        }, \"Delete\"))));\n      }))));\n    }\n  }]);\n\n  return Request;\n}(React.Component);\n\nvar condition = function condition(authUser) {\n  return authUser && authUser.isAgent === true;\n};\n\nexport default withFirebase(Request);","map":{"version":3,"sources":["C:\\Users\\nguye\\Downloads\\New folder\\src\\components\\Agent\\MessageRequest.js"],"names":["withFirebase","React","Component","Button","Card","Image","_","Request","props","componentDidMount","user","JSON","parse","localStorage","getItem","firebase","getReviewList","uid","then","result","setState","requests","onAllowClick","event","value","allowList","request","getHouseAllowList","Promise","resolve","reject","house","id","once","snapshot","item","val","forEach","allow","push","console","log","catch","err","buyer","updates","database","ref","update","onDeleteClick","reviewID","state","reviewList","newreviewList","remove","newreviewstate","map","email","bind","condition","authUser","isAgent"],"mappings":"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","sourcesContent":["import { withFirebase } from \"../../server/Firebase/index\";\nimport React, { Component } from \"react\";\nimport { Button, Card, Image } from \"semantic-ui-react\";\nimport \"./style.css\";\nimport _ from 'lodash';\nclass Request extends React.Component {\n  constructor(props){\n    super(props);\n    this.state = {\n      requests: [],\n      user: {},\n    }\n  }\n  componentDidMount = () => {\n    const user = JSON.parse(localStorage.getItem('authUser'));\n    this.props.firebase.getReviewList(user.uid).then(result => \n      this.setState({\n        requests: result,\n        user: user\n      })\n      );\n    };\n    \n    \n    onAllowClick = (event, value) => {\n      let allowList = [];\n      const request = value.value;\n      const getHouseAllowList = new Promise((resolve, reject) => {\n      this.props.firebase.house(request.house.id).once('value').then(snapshot => {\n        const item = snapshot.val();\n          if (item.allowList) {\n            item.allowList.forEach(allow => allowList.push(allow));\n            console.log(allowList)\n          }\n          resolve()\n      }\n      ).catch(err => reject(err))}\n      );\n      getHouseAllowList.then(() => {\n        allowList.push(request.buyer.id);\n        let updates = {};\n        updates[`houses/${request.house.id}`+'/allowList'] = allowList;\n        this.props.firebase.database.ref().update(updates);\n        console.log(\"Successfully add allow view\");\n      });\n    }\n    \n    \n    onDeleteClick = (event, value) => {\n      const reviewID = value.value.id;\n      console.log(reviewID);\n      this.props.firebase.user(this.state.user.uid).once('value').then(snapshot => {\n        const reviewList = snapshot.val().reviewList;\n        const newreviewList = _.remove(reviewList, reviewID);\n        let updates = {};\n        console.log(newreviewList);\n        updates[`users/${this.state.user.uid}`+'/reviewList'] = newreviewList;\n        this.props.firebase.database.ref().update(updates);\n        console.log(\"Successfully delete review list\");\n        const newreviewstate = _.remove(this.state.requests, {id: reviewID});\n        this.setState({\n          request: newreviewstate,\n        })\n      })\n\n    }\n    render() {\n      return (\n        <div className=\"MessageRequest container\">\n        <div className=\"ListMessage\">\n        <Card.Group>\n        {this.state.requests.map( request => { return (\n          <Card id={request.id} fluid>\n          <Card.Content>\n          <div className=\"TopMessage\">\n    \n          <Image\n          className=\"ImageMessage\"\n          src=\"http://davidrhysthomas.co.uk/img/dexter.png\"\n          />\n          <span className=\"DateMessage\">3 days ago</span>\n          </div>\n          \n          <Card.Header>\n          <div className=\"HeaderMessage\">\n          <span className=\"NameMessage\">{request.buyer.email}</span>\n          </div>\n          </Card.Header>\n          <Card.Meta>Membership User or Non Membership User</Card.Meta>\n          <Card.Description className=\"AMessage\">\n          <p>\n          Hello, I would like to view morw images and 3D render of the\n          house.\n          <strong>Please let me see it. Thank you</strong>\n          </p>\n          </Card.Description>\n          </Card.Content>\n          <Card.Content extra>\n          <div className=\"ListButton\">\n          <Button basic color=\"green\" value={request} onClick={this.onAllowClick.bind(this)}>\n          Approve\n          </Button>\n          <Button basic color=\"red\" value={request} onClick={this.onDeleteClick.bind(this)}>\n          Delete\n          </Button>\n          </div>\n          </Card.Content>\n          </Card>\n          )})}\n          \n          \n          \n          </Card.Group>\n          </div>\n          </div>\n          );\n        }\n      }\n      const condition = authUser =>\n      authUser && authUser.isAgent === true;\n      export default withFirebase(Request);\n      "]},"metadata":{},"sourceType":"module"}