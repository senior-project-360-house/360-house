{"ast":null,"code":"import _classCallCheck from \"C:\\\\Users\\\\nguye\\\\Downloads\\\\New folder\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:\\\\Users\\\\nguye\\\\Downloads\\\\New folder\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"C:\\\\Users\\\\nguye\\\\Downloads\\\\New folder\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"C:\\\\Users\\\\nguye\\\\Downloads\\\\New folder\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"C:\\\\Users\\\\nguye\\\\Downloads\\\\New folder\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"C:\\\\Users\\\\nguye\\\\Downloads\\\\New folder\\\\src\\\\components\\\\Render\\\\RenderRoom.js\";\nimport React, { Component } from \"react\";\nimport Container from \"react-bootstrap/Container\";\nimport FunitureDetail from \"./FunitureDetail\";\nimport Row from \"react-bootstrap/Row\";\nimport Image from \"react-bootstrap/Image\";\nimport Col from \"react-bootstrap/Col\";\nimport { withFirebase } from \"../../server/Firebase/index\";\nimport $ from \"jquery\";\nimport { Button } from \"reactstrap\";\nimport claraService from \"./Clara\";\nimport { Accordion } from \"semantic-ui-react\";\nimport Popup from \"reactjs-popup\";\nimport \"./renderroom.css\";\nimport NavBar from \"../Overview/NavBar\";\nimport { faBed, faChair, faCouch, faArchway } from \"@fortawesome/free-solid-svg-icons\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nvar clara;\nvar sceneId = \"921754c6-d081-4e97-af23-178124591393\"; //clara.sceneIO.fetchAndUse(sceneId);\n\nvar importSceneId = \"f85ef7a2-6aaa-4333-ba69-1e8f121c4706\";\nvar mouseID = \"\";\nvar groupId = \"\";\nvar THREE = \"\";\nvar groupIdAttachIdsMap = {};\nvar attachPointLocation = {};\nvar bed = [];\nvar bedimg = [];\nvar chair = [];\nvar sofa = [];\nvar kit = [];\nvar result = [];\n\nvar RenderRoom =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(RenderRoom, _Component);\n\n  function RenderRoom(props) {\n    var _this;\n\n    _classCallCheck(this, RenderRoom);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(RenderRoom).call(this, props));\n\n    _this.handleClickToggle = function (e, titleProps) {\n      var index = titleProps.index;\n      var activeIndex = _this.state.activeIndex;\n      var newIndex = activeIndex === index ? -1 : index;\n\n      _this.setState({\n        activeIndex: newIndex\n      });\n    };\n\n    _this.bedList = function () {\n      bed = [];\n      result = _this.state.items;\n\n      for (var i in result) {\n        if (result[i].name.includes(\"bed\")) {\n          bed.push(result[i]);\n        }\n      }\n\n      var count = 0;\n      return bed.map(function (data) {\n        if (count > 2) {\n          count = 0;\n          return React.createElement(\"tr\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 173\n            },\n            __self: this\n          });\n        }\n\n        count++;\n        return React.createElement(\"td\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 177\n          },\n          __self: this\n        }, React.createElement(Popup, {\n          trigger: React.createElement(Image, {\n            alt: data.id,\n            className: \"funitureImage\",\n            src: data.img,\n            onClick: function onClick(e) {\n              return _this.handleClick(data.id);\n            },\n            style: {\n              padding: \"5px\",\n              margin: \"5px\"\n            },\n            thumbnail: true,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 180\n            },\n            __self: this\n          }),\n          position: \"left\",\n          on: \"hover\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 178\n          },\n          __self: this\n        }, React.createElement(FunitureDetail, {\n          funiture: data,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 192\n          },\n          __self: this\n        })), \" \");\n      });\n    };\n\n    _this.chairList = function () {\n      chair = [];\n      result = _this.state.items;\n\n      for (var i in result) {\n        if (result[i].name.includes(\"chair\")) {\n          chair.push(result[i]);\n        }\n      }\n\n      var count = 0;\n      return chair.map(function (data) {\n        if (count > 2) {\n          count = 0;\n          return React.createElement(\"tr\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 212\n            },\n            __self: this\n          });\n        }\n\n        count++;\n        return React.createElement(\"td\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 216\n          },\n          __self: this\n        }, React.createElement(Popup, {\n          trigger: React.createElement(Image, {\n            alt: data.id,\n            className: \"funitureImage\",\n            src: data.img,\n            onClick: function onClick(e) {\n              return _this.handleClick(data.id);\n            },\n            style: {\n              padding: \"5px\",\n              margin: \"5px\"\n            },\n            thumbnail: true,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 219\n            },\n            __self: this\n          }),\n          position: \"left\",\n          on: \"hover\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 217\n          },\n          __self: this\n        }, React.createElement(FunitureDetail, {\n          funiture: data,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 231\n          },\n          __self: this\n        })), \" \");\n      });\n    };\n\n    _this.sofaList = function () {\n      sofa = [];\n      result = _this.state.items;\n\n      for (var i in result) {\n        if (result[i].name.includes(\"sofa\")) {\n          sofa.push(result[i]);\n        }\n      }\n\n      var count = 0;\n      return sofa.map(function (data) {\n        if (count > 2) {\n          count = 0;\n          return React.createElement(\"tr\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 251\n            },\n            __self: this\n          });\n        }\n\n        count++;\n        return React.createElement(\"td\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 255\n          },\n          __self: this\n        }, React.createElement(Popup, {\n          trigger: React.createElement(Image, {\n            alt: data.id,\n            className: \"funitureImage\",\n            src: data.img,\n            onClick: function onClick(e) {\n              return _this.handleClick(data.id);\n            },\n            style: {\n              padding: \"5px\",\n              margin: \"5px\"\n            },\n            thumbnail: true,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 258\n            },\n            __self: this\n          }),\n          position: \"left\",\n          on: \"hover\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 256\n          },\n          __self: this\n        }, React.createElement(FunitureDetail, {\n          funiture: data,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 270\n          },\n          __self: this\n        })), \" \");\n      });\n    };\n\n    _this.kitList = function () {\n      kit = [];\n      result = _this.state.items;\n\n      for (var i in result) {\n        if (result[i].name.includes(\"kit\")) {\n          kit.push(result[i]);\n        }\n      }\n\n      var count = 0;\n      return kit.map(function (data) {\n        if (count > 2) {\n          count = 0;\n          return React.createElement(\"tr\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 290\n            },\n            __self: this\n          });\n        }\n\n        count++;\n        return React.createElement(\"td\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 294\n          },\n          __self: this\n        }, React.createElement(Popup, {\n          trigger: React.createElement(Image, {\n            alt: data.id,\n            className: \"funitureImage\",\n            src: data.img,\n            onClick: function onClick(e) {\n              return _this.handleClick(data.id);\n            },\n            style: {\n              padding: \"5px\",\n              margin: \"5px\"\n            },\n            thumbnail: true,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 297\n            },\n            __self: this\n          }),\n          position: \"left\",\n          on: \"hover\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 295\n          },\n          __self: this\n        }, React.createElement(FunitureDetail, {\n          funiture: data,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 309\n          },\n          __self: this\n        })), \" \");\n      });\n    };\n\n    _this.clara = React.createRef(); // this.canvas = React.createRef();\n\n    _this.state = {\n      activeIndex: null,\n      items: [],\n      clara: clara\n    };\n    return _this;\n  }\n\n  _createClass(RenderRoom, [{\n    key: \"handleClick\",\n    value: function handleClick(id) {\n      importSceneId = id;\n      importScene();\n    }\n  }, {\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      var itemsRef = this.props.firebase.database.ref(\"itemImg\");\n      document.querySelector(\"#nav02\").classList.remove(\"activeNav\");\n      document.querySelector(\"#nav01\").classList.remove(\"activeNav\");\n      document.querySelector(\"#nav03\").classList.add(\"activeNav\");\n      document.querySelector(\"#nav04\").classList.remove(\"activeNav\");\n      itemsRef.on(\"value\", function (snapshot) {\n        var furnitures = snapshot.val();\n        var newState = [];\n\n        for (var item in furnitures) {\n          var furni = furnitures[item];\n\n          for (var i in furni) {\n            newState.push({\n              name: i,\n              itemName: furni[i].name,\n              id: furni[i].id,\n              img: furni[i].img,\n              price: furni[i].price,\n              demension: furni[i].demension,\n              buy: furni[i].buy\n            });\n          }\n        }\n\n        var claraContainerRef = _this2.refs.ref1;\n        clara = claraService.claraplayer(claraContainerRef); //var api = claraplayer('player');\n\n        THREE = clara.deps.THREE;\n        var rotate = \"\";\n        var opts = {\n          displayGizmo: false,\n          mode: \"plane\",\n          plane: {\n            normal: {\n              x: 0,\n              y: 1,\n              z: 0\n            },\n            constant: 0\n          }\n        };\n        clara.player.setProgressBar(\"line\"); //This function is for moving object\n\n        sceneId = window.sced;\n        clara.sceneIO.fetchAndUse(sceneId).then(function () {\n          clara.player.showTool(\"nodeMove\");\n          clara.player.removeTool(\"select\");\n          clara.selection.setHighlighting(true);\n          clara.commands.addCommand({\n            enabled: true,\n            active: true,\n            tool: {\n              click: function click(ev) {\n                var selectId = clara.player.filterNodesFromPosition(ev);\n                console.log(selectId);\n                groupId = findParentGroupId(selectId[0]);\n                mouseID = JSON.stringify(groupId);\n\n                if (!selectId || !groupId) {\n                  clara.selection.deselectAll();\n                  clara.commands.activateCommand(\"orbit\");\n                } else {\n                  clara.selection.selectNode(groupId);\n                  console.log(\"this is object id: \", groupId);\n                  clara.commands.activateCommand(\"nodeMove\");\n                  opts.onChange = updateAttachPointPosition(groupId);\n                  clara.commands.setCommandOptions(\"nodeMove\", opts);\n                }\n              }\n            }\n          });\n        });\n\n        _this2.setState({\n          items: newState,\n          clara: clara\n        });\n      });\n      $(\"#menu\").metisMenu({\n        toggle: false\n      });\n    }\n  }, {\n    key: \"getListFuniture\",\n    value: function getListFuniture() {\n      result = this.state.items;\n\n      for (var i in result) {\n        if (result[i].name.includes(\"bed\")) {\n          bed.push(result[i]);\n        } else if (result[i].name.includes(\"sofa\")) {\n          sofa.push(result[i]);\n        } else if (result[i].name.includes(\"kit\")) {\n          kit.push(result[i]);\n        } else if (result[i].name.includes(\"chair\")) {\n          chair.push(result[i]);\n        }\n      }\n    }\n  }, {\n    key: \"render\",\n    //save\n    value: function render() {\n      var activeIndex = this.state.activeIndex;\n      return React.createElement(\"div\", {\n        className: \"DrapFunitures\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 322\n        },\n        __self: this\n      }, React.createElement(NavBar, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 323\n        },\n        __self: this\n      }), React.createElement(Container, {\n        style: {\n          padding: \"10px\",\n          margin: \"0px\"\n        },\n        fluid: \"true\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 324\n        },\n        __self: this\n      }, React.createElement(Row, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 325\n        },\n        __self: this\n      }, React.createElement(Col, {\n        className: \"renderHouse1\",\n        md: 9,\n        style: {\n          width: \"70vw\",\n          height: \"80vh\",\n          border: \"0px solid  #bdc3c7\"\n        },\n        ref: \"ref1\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 326\n        },\n        __self: this\n      }, React.createElement(\"h1\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 336\n        },\n        __self: this\n      }, \"Clara Player\"), React.createElement(\"div\", {\n        className: \"groudButton\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 337\n        },\n        __self: this\n      }, React.createElement(Button, {\n        className: \"btn\",\n        variant: \"primary\",\n        type: \"button\",\n        onClick: function onClick() {\n          importScene();\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 338\n        },\n        __self: this\n      }, \"Import\"), React.createElement(Button, {\n        className: \"btn\",\n        variant: \"primary\",\n        type: \"button\",\n        onClick: function onClick() {\n          rotateFunc();\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 348\n        },\n        __self: this\n      }, \"Rotate\"), React.createElement(Button, {\n        className: \"btn\",\n        variant: \"primary\",\n        type: \"button\",\n        onClick: function onClick() {\n          scaleFunc();\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 358\n        },\n        __self: this\n      }, \"Scale\"), React.createElement(Button, {\n        className: \"btn\",\n        variant: \"primary\",\n        type: \"button\",\n        onClick: function onClick() {\n          clearScene();\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 368\n        },\n        __self: this\n      }, \"Delete\"), React.createElement(Button, {\n        variant: \"primary\",\n        type: \"button\",\n        onClick: function onClick() {\n          saveRender();\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 378\n        },\n        __self: this\n      }, \"Download\"))), React.createElement(Col, {\n        className: \"ListFuniture\",\n        md: 3,\n        style: {\n          padding: \"10px\",\n          border: \"2px solid #4FA9DB\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 390\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"funitureFeature\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 395\n        },\n        __self: this\n      }, React.createElement(Accordion, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 396\n        },\n        __self: this\n      }, React.createElement(Accordion.Title, {\n        active: activeIndex === 0,\n        index: 0,\n        onClick: this.handleClickToggle,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 397\n        },\n        __self: this\n      }, React.createElement(\"p\", {\n        className: \"itemFuniture\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 402\n        },\n        __self: this\n      }, React.createElement(FontAwesomeIcon, {\n        icon: faBed,\n        className: \"icon\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 403\n        },\n        __self: this\n      })), React.createElement(\"span\", {\n        className: \"itemFuniture\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 405\n        },\n        __self: this\n      }, \"Bed\")), React.createElement(Accordion.Content, {\n        active: activeIndex === 0,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 407\n        },\n        __self: this\n      }, this.bedList()), React.createElement(Accordion.Title, {\n        active: activeIndex === 1,\n        index: 1,\n        onClick: this.handleClickToggle,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 411\n        },\n        __self: this\n      }, React.createElement(\"p\", {\n        className: \"itemFuniture\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 416\n        },\n        __self: this\n      }, React.createElement(FontAwesomeIcon, {\n        icon: faChair,\n        className: \"icon\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 417\n        },\n        __self: this\n      })), React.createElement(\"span\", {\n        className: \"itemFuniture\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 419\n        },\n        __self: this\n      }, \"Chair\")), React.createElement(Accordion.Content, {\n        active: activeIndex === 1,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 421\n        },\n        __self: this\n      }, this.chairList()), React.createElement(Accordion.Title, {\n        active: activeIndex === 2,\n        index: 2,\n        onClick: this.handleClickToggle,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 425\n        },\n        __self: this\n      }, React.createElement(\"p\", {\n        className: \"itemFuniture\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 430\n        },\n        __self: this\n      }, React.createElement(FontAwesomeIcon, {\n        icon: faCouch,\n        className: \"icon\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 431\n        },\n        __self: this\n      })), React.createElement(\"span\", {\n        className: \"itemFuniture\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 433\n        },\n        __self: this\n      }, \"Sofa\")), React.createElement(Accordion.Content, {\n        active: activeIndex === 2,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 435\n        },\n        __self: this\n      }, this.sofaList()), React.createElement(Accordion.Title, {\n        active: activeIndex === 3,\n        index: 3,\n        onClick: this.handleClickToggle,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 438\n        },\n        __self: this\n      }, React.createElement(\"p\", {\n        className: \"itemFuniture\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 443\n        },\n        __self: this\n      }, React.createElement(FontAwesomeIcon, {\n        icon: faArchway,\n        className: \"icon\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 444\n        },\n        __self: this\n      })), React.createElement(\"span\", {\n        className: \"itemFuniture\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 446\n        },\n        __self: this\n      }, \"Kitchen\")), React.createElement(Accordion.Content, {\n        active: activeIndex === 3,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 448\n        },\n        __self: this\n      }, this.kitList())))))));\n    }\n  }]);\n\n  return RenderRoom;\n}(Component);\n\nfunction updateAttachPointPosition(groupId) {\n  attachPointLocation[groupId] = {};\n  var pointIds = groupIdAttachIdsMap[groupId];\n\n  if (pointIds) {\n    pointIds.forEach(function (id) {\n      var transformInfo = clara.scene.getWorldTransform(id);\n      attachPointLocation[groupId][id] = new THREE.Vector3().setFromMatrixPosition(transformInfo);\n    });\n  }\n}\n\nfunction importScene() {\n  // dong nay labac buoc phai co, tai no copy cai scene cua minh bang id, roi tao mot scene moi.\n  clara.sceneIO.fetch(importSceneId).then(function () {\n    // dong nay tao cai id moi co cai scene minh moi copy\n    var newObjectsIds = clara.scene.find({\n      from: {\n        id: importSceneId\n      },\n      name: \"Objects\"\n    }); //code de copy cai scene\n\n    clara.scene.clone({\n      from: {\n        id: newObjectsIds\n      },\n      type: [\"PolyMesh\", \"Null\"]\n    }, {\n      withNull: \"Import Null\",\n      includeDependencies: true\n    }).then(function (nodeMap) {\n      clara.scene.set( //cai nay set position cho cai scene luc minh add vao\n      {\n        id: nodeMap[\"Import Null\"],\n        plug: \"Transform\",\n        property: \"translation\"\n      }, {\n        x: 0.12,\n        y: 0,\n        z: -0.12 //y: numImports++ / 2\n\n      });\n    });\n    clara.scene.find({\n      name: \"Objects\"\n    }).name = \"BoxGroup\";\n  });\n}\n\nfunction findParentGroupId(selectId) {\n  var groupId = selectId;\n  var nodeName = clara.scene.get({\n    id: groupId,\n    property: \"name\"\n  });\n\n  while (nodeName !== \"BoxGroup\") {\n    if (!nodeName) return null;\n    groupId = clara.scene.find({\n      id: groupId,\n      parent: true\n    });\n    nodeName = clara.scene.get({\n      id: groupId,\n      property: \"name\"\n    });\n  }\n\n  return groupId;\n}\n\nfunction scaleFunc() {\n  clara.commands.activateCommand(\"nodeScale\");\n}\n\nfunction saveRender() {\n  var id = clara.scene.find({\n    name: \"Objects\"\n  });\n  clara.commands.setCommandOptions(\"snapshot\", {\n    dataType: \"download image\",\n    camera: \"default\",\n    width: 1000,\n    height: 800\n  });\n  var items = clara.commands.runCommand(\"snapshot\");\n\n  if (items) {\n    var resultImage = document.getElementById(\"resultImage\");\n    resultImage.src = URL.createObjectURL(items);\n  }\n}\n\nfunction rand(to, from) {\n  return Math.floor(Math.random() * from + to);\n} //this method adding object to the scene\n//this method delete the object from the scene. All object have to be name: BoxGroup\n\n\nfunction clearScene() {\n  clara.sceneGraph.deleteNode(mouseID.substring(1, mouseID.length - 1));\n} //This function helps rotating object. Need to improve the performance of this function.\n\n\nfunction rotateFunc() {\n  clara.commands.activateCommand(\"nodeRotate\");\n} //this function helps to scale the objects\n\n\nexport default withFirebase(RenderRoom);","map":{"version":3,"sources":["C:\\Users\\nguye\\Downloads\\New folder\\src\\components\\Render\\RenderRoom.js"],"names":["React","Component","Container","FunitureDetail","Row","Image","Col","withFirebase","$","Button","claraService","Accordion","Popup","NavBar","faBed","faChair","faCouch","faArchway","FontAwesomeIcon","clara","sceneId","importSceneId","mouseID","groupId","THREE","groupIdAttachIdsMap","attachPointLocation","bed","bedimg","chair","sofa","kit","result","RenderRoom","props","handleClickToggle","e","titleProps","index","activeIndex","state","newIndex","setState","bedList","items","i","name","includes","push","count","map","data","id","img","handleClick","padding","margin","chairList","sofaList","kitList","createRef","importScene","itemsRef","firebase","database","ref","document","querySelector","classList","remove","add","on","snapshot","furnitures","val","newState","item","furni","itemName","price","demension","buy","claraContainerRef","refs","ref1","claraplayer","deps","rotate","opts","displayGizmo","mode","plane","normal","x","y","z","constant","player","setProgressBar","window","sced","sceneIO","fetchAndUse","then","showTool","removeTool","selection","setHighlighting","commands","addCommand","enabled","active","tool","click","ev","selectId","filterNodesFromPosition","console","log","findParentGroupId","JSON","stringify","deselectAll","activateCommand","selectNode","onChange","updateAttachPointPosition","setCommandOptions","metisMenu","toggle","width","height","border","rotateFunc","scaleFunc","clearScene","saveRender","pointIds","forEach","transformInfo","scene","getWorldTransform","Vector3","setFromMatrixPosition","fetch","newObjectsIds","find","from","clone","type","withNull","includeDependencies","nodeMap","set","plug","property","nodeName","get","parent","dataType","camera","runCommand","resultImage","getElementById","src","URL","createObjectURL","rand","to","Math","floor","random","sceneGraph","deleteNode","substring","length"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\r\n\r\nimport Container from \"react-bootstrap/Container\";\r\nimport FunitureDetail from \"./FunitureDetail\";\r\n\r\nimport Row from \"react-bootstrap/Row\";\r\nimport Image from \"react-bootstrap/Image\";\r\nimport Col from \"react-bootstrap/Col\";\r\nimport { withFirebase } from \"../../server/Firebase/index\";\r\nimport $ from \"jquery\";\r\nimport { Button } from \"reactstrap\";\r\nimport claraService from \"./Clara\";\r\nimport { Accordion } from \"semantic-ui-react\";\r\nimport Popup from \"reactjs-popup\";\r\nimport \"./renderroom.css\";\r\nimport NavBar from \"../Overview/NavBar\";\r\nimport {\r\n  faBed,\r\n  faChair,\r\n  faCouch,\r\n  faArchway\r\n} from \"@fortawesome/free-solid-svg-icons\";\r\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\r\nlet clara;\r\n\r\nlet sceneId = \"921754c6-d081-4e97-af23-178124591393\";\r\n//clara.sceneIO.fetchAndUse(sceneId);\r\nlet importSceneId = \"f85ef7a2-6aaa-4333-ba69-1e8f121c4706\";\r\nlet mouseID = \"\";\r\nlet groupId = \"\";\r\nvar THREE = \"\";\r\nvar groupIdAttachIdsMap = {};\r\nvar attachPointLocation = {};\r\nvar bed = [];\r\nvar bedimg = [];\r\nvar chair = [];\r\nvar sofa = [];\r\nvar kit = [];\r\nvar result = [];\r\n\r\nclass RenderRoom extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.clara = React.createRef();\r\n    // this.canvas = React.createRef();\r\n    this.state = {\r\n      activeIndex: null,\r\n      items: [],\r\n      clara: clara\r\n    };\r\n  }\r\n\r\n  handleClick(id) {\r\n    importSceneId = id;\r\n    importScene();\r\n  }\r\n\r\n  componentDidMount() {\r\n    const itemsRef = this.props.firebase.database.ref(\"itemImg\");\r\n    document.querySelector(\"#nav02\").classList.remove(\"activeNav\");\r\n    document.querySelector(\"#nav01\").classList.remove(\"activeNav\");\r\n    document.querySelector(\"#nav03\").classList.add(\"activeNav\");\r\n    document.querySelector(\"#nav04\").classList.remove(\"activeNav\");\r\n    itemsRef.on(\"value\", snapshot => {\r\n      let furnitures = snapshot.val();\r\n      let newState = [];\r\n\r\n      for (let item in furnitures) {\r\n        var furni = furnitures[item];\r\n        for (let i in furni) {\r\n          newState.push({\r\n            name: i,\r\n            itemName: furni[i].name,\r\n            id: furni[i].id,\r\n            img: furni[i].img,\r\n            price: furni[i].price,\r\n            demension: furni[i].demension,\r\n            buy: furni[i].buy\r\n          });\r\n        }\r\n      }\r\n      let claraContainerRef = this.refs.ref1;\r\n      clara = claraService.claraplayer(claraContainerRef);\r\n\r\n      //var api = claraplayer('player');\r\n      THREE = clara.deps.THREE;\r\n      var rotate = \"\";\r\n      var opts = {\r\n        displayGizmo: false,\r\n        mode: \"plane\",\r\n        plane: { normal: { x: 0, y: 1, z: 0 }, constant: 0 }\r\n      };\r\n      clara.player.setProgressBar(\"line\");\r\n      //This function is for moving object\r\n      sceneId = window.sced;\r\n      clara.sceneIO.fetchAndUse(sceneId).then(function() {\r\n        clara.player.showTool(\"nodeMove\");\r\n        clara.player.removeTool(\"select\");\r\n        clara.selection.setHighlighting(true);\r\n\r\n        clara.commands.addCommand({\r\n          enabled: true,\r\n          active: true,\r\n          tool: {\r\n            click: function(ev) {\r\n              var selectId = clara.player.filterNodesFromPosition(ev);\r\n              console.log(selectId);\r\n              groupId = findParentGroupId(selectId[0]);\r\n              mouseID = JSON.stringify(groupId);\r\n              if (!selectId || !groupId) {\r\n                clara.selection.deselectAll();\r\n                clara.commands.activateCommand(\"orbit\");\r\n              } else {\r\n                clara.selection.selectNode(groupId);\r\n                console.log(\"this is object id: \", groupId);\r\n                clara.commands.activateCommand(\"nodeMove\");\r\n                opts.onChange = updateAttachPointPosition(groupId);\r\n                clara.commands.setCommandOptions(\"nodeMove\", opts);\r\n              }\r\n            }\r\n          }\r\n        });\r\n      });\r\n\r\n      this.setState({\r\n        items: newState,\r\n        clara: clara\r\n      });\r\n    });\r\n\r\n    $(\"#menu\").metisMenu({\r\n      toggle: false\r\n    });\r\n  }\r\n\r\n  handleClickToggle = (e, titleProps) => {\r\n    const { index } = titleProps;\r\n    const { activeIndex } = this.state;\r\n\r\n    const newIndex = activeIndex === index ? -1 : index;\r\n\r\n    this.setState({ activeIndex: newIndex });\r\n  };\r\n\r\n  getListFuniture() {\r\n    result = this.state.items;\r\n    for (var i in result) {\r\n      if (result[i].name.includes(\"bed\")) {\r\n        bed.push(result[i]);\r\n      } else if (result[i].name.includes(\"sofa\")) {\r\n        sofa.push(result[i]);\r\n      } else if (result[i].name.includes(\"kit\")) {\r\n        kit.push(result[i]);\r\n      } else if (result[i].name.includes(\"chair\")) {\r\n        chair.push(result[i]);\r\n      }\r\n    }\r\n  }\r\n\r\n  bedList = () => {\r\n    bed = [];\r\n    result = this.state.items;\r\n    for (var i in result) {\r\n      if (result[i].name.includes(\"bed\")) {\r\n        bed.push(result[i]);\r\n      }\r\n    }\r\n\r\n    var count = 0;\r\n    return bed.map(data => {\r\n      if (count > 2) {\r\n        count = 0;\r\n        return <tr />;\r\n      }\r\n      count++;\r\n      return (\r\n        <td>\r\n          <Popup\r\n            trigger={\r\n              <Image\r\n                alt={data.id}\r\n                className=\"funitureImage\"\r\n                src={data.img}\r\n                onClick={e => this.handleClick(data.id)}\r\n                style={{ padding: \"5px\", margin: \"5px\" }}\r\n                thumbnail\r\n              />\r\n            }\r\n            position=\"left\"\r\n            on=\"hover\"\r\n          >\r\n            <FunitureDetail funiture={data} />\r\n          </Popup>{\" \"}\r\n        </td>\r\n      );\r\n    });\r\n  };\r\n\r\n  chairList = () => {\r\n    chair = [];\r\n    result = this.state.items;\r\n    for (var i in result) {\r\n      if (result[i].name.includes(\"chair\")) {\r\n        chair.push(result[i]);\r\n      }\r\n    }\r\n\r\n    var count = 0;\r\n    return chair.map(data => {\r\n      if (count > 2) {\r\n        count = 0;\r\n        return <tr />;\r\n      }\r\n      count++;\r\n      return (\r\n        <td>\r\n          <Popup\r\n            trigger={\r\n              <Image\r\n                alt={data.id}\r\n                className=\"funitureImage\"\r\n                src={data.img}\r\n                onClick={e => this.handleClick(data.id)}\r\n                style={{ padding: \"5px\", margin: \"5px\" }}\r\n                thumbnail\r\n              />\r\n            }\r\n            position=\"left\"\r\n            on=\"hover\"\r\n          >\r\n            <FunitureDetail funiture={data} />\r\n          </Popup>{\" \"}\r\n        </td>\r\n      );\r\n    });\r\n  };\r\n\r\n  sofaList = () => {\r\n    sofa = [];\r\n    result = this.state.items;\r\n    for (var i in result) {\r\n      if (result[i].name.includes(\"sofa\")) {\r\n        sofa.push(result[i]);\r\n      }\r\n    }\r\n\r\n    var count = 0;\r\n    return sofa.map(data => {\r\n      if (count > 2) {\r\n        count = 0;\r\n        return <tr />;\r\n      }\r\n      count++;\r\n      return (\r\n        <td>\r\n          <Popup\r\n            trigger={\r\n              <Image\r\n                alt={data.id}\r\n                className=\"funitureImage\"\r\n                src={data.img}\r\n                onClick={e => this.handleClick(data.id)}\r\n                style={{ padding: \"5px\", margin: \"5px\" }}\r\n                thumbnail\r\n              />\r\n            }\r\n            position=\"left\"\r\n            on=\"hover\"\r\n          >\r\n            <FunitureDetail funiture={data} />\r\n          </Popup>{\" \"}\r\n        </td>\r\n      );\r\n    });\r\n  };\r\n\r\n  kitList = () => {\r\n    kit = [];\r\n    result = this.state.items;\r\n    for (var i in result) {\r\n      if (result[i].name.includes(\"kit\")) {\r\n        kit.push(result[i]);\r\n      }\r\n    }\r\n\r\n    var count = 0;\r\n    return kit.map(data => {\r\n      if (count > 2) {\r\n        count = 0;\r\n        return <tr />;\r\n      }\r\n      count++;\r\n      return (\r\n        <td>\r\n          <Popup\r\n            trigger={\r\n              <Image\r\n                alt={data.id}\r\n                className=\"funitureImage\"\r\n                src={data.img}\r\n                onClick={e => this.handleClick(data.id)}\r\n                style={{ padding: \"5px\", margin: \"5px\" }}\r\n                thumbnail\r\n              />\r\n            }\r\n            position=\"left\"\r\n            on=\"hover\"\r\n          >\r\n            <FunitureDetail funiture={data} />\r\n          </Popup>{\" \"}\r\n        </td>\r\n      );\r\n    });\r\n  };\r\n\r\n  //save\r\n\r\n  render() {\r\n    const { activeIndex } = this.state;\r\n\r\n    return (\r\n      <div className=\"DrapFunitures\">\r\n        <NavBar />\r\n        <Container style={{ padding: \"10px\", margin: \"0px\" }} fluid=\"true\">\r\n          <Row>\r\n            <Col\r\n              className=\"renderHouse1\"\r\n              md={9}\r\n              style={{\r\n                width: \"70vw\",\r\n                height: \"80vh\",\r\n                border: \"0px solid  #bdc3c7\"\r\n              }}\r\n              ref=\"ref1\"\r\n            >\r\n              <h1>Clara Player</h1>\r\n              <div className=\"groudButton\">\r\n                <Button\r\n                  className=\"btn\"\r\n                  variant=\"primary\"\r\n                  type=\"button\"\r\n                  onClick={() => {\r\n                    importScene();\r\n                  }}\r\n                >\r\n                  Import\r\n                </Button>\r\n                <Button\r\n                  className=\"btn\"\r\n                  variant=\"primary\"\r\n                  type=\"button\"\r\n                  onClick={() => {\r\n                    rotateFunc();\r\n                  }}\r\n                >\r\n                  Rotate\r\n                </Button>\r\n                <Button\r\n                  className=\"btn\"\r\n                  variant=\"primary\"\r\n                  type=\"button\"\r\n                  onClick={() => {\r\n                    scaleFunc();\r\n                  }}\r\n                >\r\n                  Scale\r\n                </Button>\r\n                <Button\r\n                  className=\"btn\"\r\n                  variant=\"primary\"\r\n                  type=\"button\"\r\n                  onClick={() => {\r\n                    clearScene();\r\n                  }}\r\n                >\r\n                  Delete\r\n                </Button>\r\n                <Button\r\n                  variant=\"primary\"\r\n                  type=\"button\"\r\n                  onClick={() => {\r\n                    saveRender();\r\n                  }}\r\n                >\r\n                  Download\r\n                </Button>\r\n              </div>\r\n            </Col>\r\n\r\n            <Col\r\n              className=\"ListFuniture\"\r\n              md={3}\r\n              style={{ padding: \"10px\", border: \"2px solid #4FA9DB\" }}\r\n            >\r\n              <div className=\"funitureFeature\">\r\n                <Accordion>\r\n                  <Accordion.Title\r\n                    active={activeIndex === 0}\r\n                    index={0}\r\n                    onClick={this.handleClickToggle}\r\n                  >\r\n                    <p className=\"itemFuniture\">\r\n                      <FontAwesomeIcon icon={faBed} className=\"icon\" />\r\n                    </p>\r\n                    <span className=\"itemFuniture\">Bed</span>\r\n                  </Accordion.Title>\r\n                  <Accordion.Content active={activeIndex === 0}>\r\n                    {this.bedList()}\r\n                  </Accordion.Content>\r\n\r\n                  <Accordion.Title\r\n                    active={activeIndex === 1}\r\n                    index={1}\r\n                    onClick={this.handleClickToggle}\r\n                  >\r\n                    <p className=\"itemFuniture\">\r\n                      <FontAwesomeIcon icon={faChair} className=\"icon\" />\r\n                    </p>\r\n                    <span className=\"itemFuniture\">Chair</span>\r\n                  </Accordion.Title>\r\n                  <Accordion.Content active={activeIndex === 1}>\r\n                    {this.chairList()}\r\n                  </Accordion.Content>\r\n\r\n                  <Accordion.Title\r\n                    active={activeIndex === 2}\r\n                    index={2}\r\n                    onClick={this.handleClickToggle}\r\n                  >\r\n                    <p className=\"itemFuniture\">\r\n                      <FontAwesomeIcon icon={faCouch} className=\"icon\" />\r\n                    </p>\r\n                    <span className=\"itemFuniture\">Sofa</span>\r\n                  </Accordion.Title>\r\n                  <Accordion.Content active={activeIndex === 2}>\r\n                    {this.sofaList()}\r\n                  </Accordion.Content>\r\n                  <Accordion.Title\r\n                    active={activeIndex === 3}\r\n                    index={3}\r\n                    onClick={this.handleClickToggle}\r\n                  >\r\n                    <p className=\"itemFuniture\">\r\n                      <FontAwesomeIcon icon={faArchway} className=\"icon\" />\r\n                    </p>\r\n                    <span className=\"itemFuniture\">Kitchen</span>\r\n                  </Accordion.Title>\r\n                  <Accordion.Content active={activeIndex === 3}>\r\n                    {this.kitList()}\r\n                  </Accordion.Content>\r\n                </Accordion>\r\n              </div>\r\n            </Col>\r\n          </Row>\r\n        </Container>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nfunction updateAttachPointPosition(groupId) {\r\n  attachPointLocation[groupId] = {};\r\n  var pointIds = groupIdAttachIdsMap[groupId];\r\n  if (pointIds) {\r\n    pointIds.forEach(function(id) {\r\n      var transformInfo = clara.scene.getWorldTransform(id);\r\n      attachPointLocation[groupId][\r\n        id\r\n      ] = new THREE.Vector3().setFromMatrixPosition(transformInfo);\r\n    });\r\n  }\r\n}\r\n\r\nfunction importScene() {\r\n  // dong nay labac buoc phai co, tai no copy cai scene cua minh bang id, roi tao mot scene moi.\r\n  clara.sceneIO.fetch(importSceneId).then(function() {\r\n    // dong nay tao cai id moi co cai scene minh moi copy\r\n    var newObjectsIds = clara.scene.find({\r\n      from: { id: importSceneId },\r\n      name: \"Objects\"\r\n    });\r\n    //code de copy cai scene\r\n    clara.scene\r\n      .clone(\r\n        { from: { id: newObjectsIds }, type: [\"PolyMesh\", \"Null\"] },\r\n        { withNull: \"Import Null\", includeDependencies: true }\r\n      )\r\n      .then(function(nodeMap) {\r\n        clara.scene.set(\r\n          //cai nay set position cho cai scene luc minh add vao\r\n          {\r\n            id: nodeMap[\"Import Null\"],\r\n            plug: \"Transform\",\r\n            property: \"translation\"\r\n          },\r\n          { x: 0.12, y: 0, z: -0.12 } //y: numImports++ / 2\r\n        );\r\n      });\r\n    clara.scene.find({ name: \"Objects\" }).name = \"BoxGroup\";\r\n  });\r\n}\r\nfunction findParentGroupId(selectId) {\r\n  var groupId = selectId;\r\n  var nodeName = clara.scene.get({ id: groupId, property: \"name\" });\r\n  while (nodeName !== \"BoxGroup\") {\r\n    if (!nodeName) return null;\r\n    groupId = clara.scene.find({ id: groupId, parent: true });\r\n    nodeName = clara.scene.get({ id: groupId, property: \"name\" });\r\n  }\r\n  return groupId;\r\n}\r\n\r\nfunction scaleFunc() {\r\n  clara.commands.activateCommand(\"nodeScale\");\r\n}\r\n\r\nfunction saveRender() {\r\n  var id = clara.scene.find({ name: \"Objects\" });\r\n  clara.commands.setCommandOptions(\"snapshot\", {\r\n    dataType: \"download image\",\r\n    camera: \"default\",\r\n    width: 1000,\r\n    height: 800\r\n  });\r\n  var items = clara.commands.runCommand(\"snapshot\");\r\n  if (items) {\r\n    var resultImage = document.getElementById(\"resultImage\");\r\n    resultImage.src = URL.createObjectURL(items);\r\n  }\r\n}\r\n\r\nfunction rand(to, from) {\r\n  return Math.floor(Math.random() * from + to);\r\n}\r\n\r\n//this method adding object to the scene\r\n\r\n//this method delete the object from the scene. All object have to be name: BoxGroup\r\nfunction clearScene() {\r\n  clara.sceneGraph.deleteNode(mouseID.substring(1, mouseID.length - 1));\r\n}\r\n\r\n//This function helps rotating object. Need to improve the performance of this function.\r\nfunction rotateFunc() {\r\n  clara.commands.activateCommand(\"nodeRotate\");\r\n}\r\n\r\n//this function helps to scale the objects\r\n\r\nexport default withFirebase(RenderRoom);\r\n"]},"metadata":{},"sourceType":"module"}