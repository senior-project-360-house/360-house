{"ast":null,"code":"import _classCallCheck from \"C:\\\\Users\\\\nguye\\\\Downloads\\\\New folder\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:\\\\Users\\\\nguye\\\\Downloads\\\\New folder\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"C:\\\\Users\\\\nguye\\\\Downloads\\\\New folder\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"C:\\\\Users\\\\nguye\\\\Downloads\\\\New folder\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"C:\\\\Users\\\\nguye\\\\Downloads\\\\New folder\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"C:\\\\Users\\\\nguye\\\\Downloads\\\\New folder\\\\src\\\\components\\\\Map\\\\index.js\";\nimport React, { Component, MapContainer } from \"react\";\nimport MapUtil from \"./utils.js\";\nimport { load_google_maps, load_bus, load_school, load_school2, load_market, load_shop, getLatAndLong } from \"./utils\";\nimport { withFirebase } from \"../../server/Firebase/index\";\nimport geolib from \"geolib\";\nimport Row from \"react-bootstrap/Row\";\nimport Table from \"react-bootstrap/Table\";\nimport Col from \"react-bootstrap/Col\";\nimport \"./style.css\";\nimport NavBars from \"../Overview/NavBar\";\nvar shortestBus = {\n  name: \"\",\n  distance: 16000\n};\nvar shortestSchool = {\n  name: \"\",\n  distance: 16000\n};\nvar shortestMarket = {\n  name: \"\",\n  distance: 16000\n};\nvar shortestShopping = {\n  name: \"\",\n  distance: 16000\n};\n\nvar MapPage =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(MapPage, _Component);\n\n  function MapPage(props) {\n    var _this;\n\n    _classCallCheck(this, MapPage);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(MapPage).call(this, props));\n    _this.state = {\n      open: false,\n      items: []\n    };\n    return _this;\n  }\n\n  _createClass(MapPage, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      var itemsRef = this.props.firebase.database.ref(\"houses\");\n      document.querySelector(\"#nav02\").classList.remove(\"activeNav\");\n      document.querySelector(\"#nav01\").classList.remove(\"activeNav\");\n      document.querySelector(\"#nav03\").classList.remove(\"activeNav\");\n      document.querySelector(\"#nav04\").classList.add(\"activeNav\");\n      itemsRef.on(\"value\", function (snapshot) {\n        var hs = snapshot.val();\n        var newState = [];\n        newState.push({\n          lat: hs.house1.lat,\n          lng: hs.house1.lng\n        });\n\n        _this2.setState({\n          items: newState\n        });\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this3 = this;\n\n      var lat = 37.29465;\n      var lng = -121.78171;\n      var icon = \"https://maps.google.com/mapfiles/kml/shapes/\";\n      var busIcon = icon + \"bus_maps.png\";\n      var shopIcon = icon + \"shopping_maps.png\";\n      var schoolIcon = icon + \"schools.png\";\n      var marketIcon = icon + \"grocery.png\";\n      var house = icon + \"homegardenbusiness.png\";\n      var googleMapsPromise = load_google_maps(); // let lat = Number(this.state.items[0]?this.state.items[0].lat:null);\n      // let lng = Number(this.state.items[0]?this.state.items[0].lng:null);\n      // console.log(lat);\n\n      var bus = load_bus(lat, lng);\n      var school = load_school(lat, lng);\n      var school2 = load_school2(lat, lng);\n      var market = load_market(lat, lng);\n      var shop = load_shop(lat, lng);\n      Promise.all([googleMapsPromise, bus, school, school2, market, shop]).then(function (values) {\n        var google = values[0];\n        var venuesA = [];\n        _this3.google = google;\n        _this3.markers = [];\n        _this3.infowindow = new google.maps.InfoWindow();\n        venuesA.push(values[1].response.minivenues);\n        venuesA.push(values[2].response.minivenues);\n        venuesA.push(values[3].response.minivenues);\n        venuesA.push(values[4].response.minivenues);\n        venuesA.push(values[5].response.minivenues);\n        var position = {\n          lat: lat,\n          lng: lng\n        };\n        _this3.map = new google.maps.Map(document.getElementById(\"map\"), {\n          zoom: 12,\n          scrollwheel: true,\n          center: {\n            lat: lat,\n            lng: lng\n          }\n        });\n        venuesA.forEach(function (venues) {\n          _this3.venues = venues;\n\n          _this3.venues.forEach(function (venue) {\n            if (geolib.getDistance({\n              latitude: lat,\n              longitude: lng\n            }, {\n              latitude: venue.location.lat,\n              longitude: venue.location.lng\n            }) <= 16000) {\n              var marker;\n\n              if (venue.name.includes(\"Bus Stop\")) {\n                if (venue.location.distance < shortestBus.distance) {\n                  shortestBus.name = venue.name;\n                  shortestBus.distance = venue.location.distance;\n                }\n\n                marker = new google.maps.Marker({\n                  position: {\n                    lat: venue.location.lat,\n                    lng: venue.location.lng\n                  },\n                  map: _this3.map,\n                  venue: venue,\n                  id: venue.id,\n                  name: venue.name,\n                  animation: google.maps.Animation.DROP,\n                  icon: busIcon\n                });\n              } else if (venue.name.includes(\"Shopping\") && !venue.name.includes(\"Parking\")) {\n                if (venue.location.distance < shortestShopping.distance) {\n                  shortestShopping.name = venue.name;\n                  shortestShopping.distance = venue.location.distance;\n                }\n\n                marker = new google.maps.Marker({\n                  position: {\n                    lat: venue.location.lat,\n                    lng: venue.location.lng\n                  },\n                  map: _this3.map,\n                  venue: venue,\n                  id: venue.id,\n                  name: venue.name,\n                  animation: google.maps.Animation.DROP,\n                  icon: shopIcon\n                });\n              } else if (venue.name.includes(\"Market\")) {\n                if (venue.location.distance < shortestMarket.distance) {\n                  shortestMarket.name = venue.name;\n                  shortestMarket.distance = venue.location.distance;\n                }\n\n                marker = new google.maps.Marker({\n                  position: {\n                    lat: venue.location.lat,\n                    lng: venue.location.lng\n                  },\n                  map: _this3.map,\n                  venue: venue,\n                  id: venue.id,\n                  name: venue.name,\n                  animation: google.maps.Animation.DROP,\n                  icon: marketIcon\n                });\n              } else if (venue.name.includes(\"School\") || venue.name.includes(\"College\") || venue.name.includes(\"University\")) {\n                if (venue.location.distance < shortestSchool.distance) {\n                  {\n                    shortestSchool.name = venue.name;\n                    shortestSchool.distance = venue.location.distance;\n                  }\n                }\n\n                marker = new google.maps.Marker({\n                  position: {\n                    lat: venue.location.lat,\n                    lng: venue.location.lng\n                  },\n                  map: _this3.map,\n                  venue: venue,\n                  id: venue.id,\n                  name: venue.name,\n                  animation: google.maps.Animation.DROP,\n                  icon: schoolIcon\n                });\n              } else {\n                if (venue.location.distance < shortestMarket.distance) {\n                  {\n                    shortestMarket.name = venue.name;\n                    shortestMarket.distance = venue.location.distance;\n                  }\n                }\n\n                marker = new google.maps.Marker({\n                  position: {\n                    lat: lat,\n                    lng: lng\n                  },\n                  map: _this3.map,\n                  name: \"You are here\",\n                  animation: google.maps.Animation.DROP,\n                  icon: house\n                });\n              }\n\n              marker.addListener(\"click\", function () {\n                if (marker.getAnimation() !== null) {\n                  marker.setAnimation(null);\n                } else {\n                  marker.setAnimation(google.maps.Animation.BOUNCE);\n                }\n\n                setTimeout(function () {\n                  marker.setAnimation(null);\n                }, 1500);\n              });\n              google.maps.event.addListener(marker, \"click\", function () {\n                _this3.infowindow.setContent(marker.name);\n\n                _this3.map.setCenter(marker.position);\n\n                _this3.infowindow.open(_this3.map, marker);\n\n                _this3.map.panBy(0, -125);\n              });\n\n              _this3.markers.push(marker);\n            }\n          });\n\n          console.log(shortestShopping);\n        });\n      });\n      return React.createElement(\"div\", {\n        className: \"Map\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 231\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"TopBar\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 232\n        },\n        __self: this\n      }, React.createElement(NavBars, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 233\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        className: \"mapDeatil\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 235\n        },\n        __self: this\n      }, React.createElement(Row, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 236\n        },\n        __self: this\n      }, React.createElement(Col, {\n        className: \"GoogleMap\",\n        id: \"map\",\n        lg: 10,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 237\n        },\n        __self: this\n      }), React.createElement(Col, {\n        lg: 2,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 238\n        },\n        __self: this\n      }, React.createElement(\"h2\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 239\n        },\n        __self: this\n      }, \"Nearby Location\"), React.createElement(Table, {\n        striped: true,\n        bordered: true,\n        hover: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 240\n        },\n        __self: this\n      }, React.createElement(\"thead\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 241\n        },\n        __self: this\n      }, React.createElement(\"tr\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 242\n        },\n        __self: this\n      }, React.createElement(\"th\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 243\n        },\n        __self: this\n      }, \"Name\"), React.createElement(\"th\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 244\n        },\n        __self: this\n      }, \"Distance\"))), React.createElement(\"tbody\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 247\n        },\n        __self: this\n      }, React.createElement(\"tr\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 248\n        },\n        __self: this\n      }, React.createElement(\"td\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 249\n        },\n        __self: this\n      }, shortestSchool.name), React.createElement(\"td\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 250\n        },\n        __self: this\n      }, convertToMile(shortestSchool.distance), \" miles\")), React.createElement(\"tr\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 252\n        },\n        __self: this\n      }, React.createElement(\"td\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 253\n        },\n        __self: this\n      }, shortestBus.name), React.createElement(\"td\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 254\n        },\n        __self: this\n      }, convertToMile(shortestBus.distance), \" miles\")), React.createElement(\"tr\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 256\n        },\n        __self: this\n      }, React.createElement(\"td\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 257\n        },\n        __self: this\n      }, shortestMarket.name), React.createElement(\"td\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 258\n        },\n        __self: this\n      }, convertToMile(shortestMarket.distance), \" miles\")), React.createElement(\"tr\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 260\n        },\n        __self: this\n      }, React.createElement(\"td\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 261\n        },\n        __self: this\n      }, shortestShopping.name), React.createElement(\"td\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 262\n        },\n        __self: this\n      }, convertToMile(shortestShopping.distance), \" miles\"))))))));\n    }\n  }]);\n\n  return MapPage;\n}(Component);\n\nfunction convertToMile(distance) {\n  return parseFloat((Number(distance) * 0.00062137).toFixed(2));\n}\n\nexport default withFirebase(MapPage);","map":{"version":3,"sources":["C:\\Users\\nguye\\Downloads\\New folder\\src\\components\\Map\\index.js"],"names":["React","Component","MapContainer","MapUtil","load_google_maps","load_bus","load_school","load_school2","load_market","load_shop","getLatAndLong","withFirebase","geolib","Row","Table","Col","NavBars","shortestBus","name","distance","shortestSchool","shortestMarket","shortestShopping","MapPage","props","state","open","items","itemsRef","firebase","database","ref","document","querySelector","classList","remove","add","on","snapshot","hs","val","newState","push","lat","house1","lng","setState","icon","busIcon","shopIcon","schoolIcon","marketIcon","house","googleMapsPromise","bus","school","school2","market","shop","Promise","all","then","values","google","venuesA","markers","infowindow","maps","InfoWindow","response","minivenues","position","map","Map","getElementById","zoom","scrollwheel","center","forEach","venues","venue","getDistance","latitude","longitude","location","marker","includes","Marker","id","animation","Animation","DROP","addListener","getAnimation","setAnimation","BOUNCE","setTimeout","event","setContent","setCenter","panBy","console","log","convertToMile","parseFloat","Number","toFixed"],"mappings":"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","sourcesContent":["import React, { Component, MapContainer } from \"react\";\nimport MapUtil from \"./utils.js\";\nimport {\n  load_google_maps,\n  load_bus,\n  load_school,\n  load_school2,\n  load_market,\n  load_shop,\n  getLatAndLong\n} from \"./utils\";\nimport { withFirebase } from \"../../server/Firebase/index\";\nimport geolib from \"geolib\";\nimport Row from \"react-bootstrap/Row\";\nimport Table from \"react-bootstrap/Table\";\nimport Col from \"react-bootstrap/Col\";\nimport \"./style.css\";\nimport NavBars from \"../Overview/NavBar\";\nlet shortestBus = {\n  name: \"\",\n  distance: 16000\n};\nlet shortestSchool = {\n  name: \"\",\n  distance: 16000\n};\nlet shortestMarket = {\n  name: \"\",\n  distance: 16000\n};\nlet shortestShopping = {\n  name: \"\",\n  distance: 16000\n};\n\nclass MapPage extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      open: false,\n      items: []\n    };\n  }\n  componentDidMount() {\n    const itemsRef = this.props.firebase.database.ref(\"houses\");\n    document.querySelector(\"#nav02\").classList.remove(\"activeNav\");\n    document.querySelector(\"#nav01\").classList.remove(\"activeNav\");\n    document.querySelector(\"#nav03\").classList.remove(\"activeNav\");\n    document.querySelector(\"#nav04\").classList.add(\"activeNav\");\n    itemsRef.on(\"value\", snapshot => {\n      let hs = snapshot.val();\n      let newState = [];\n      newState.push({\n        lat: hs.house1.lat,\n        lng: hs.house1.lng\n      });\n      this.setState({\n        items: newState\n      });\n    });\n  }\n  render() {\n    let lat = 37.29465;\n    let lng = -121.78171;\n    let icon = \"https://maps.google.com/mapfiles/kml/shapes/\";\n    let busIcon = icon + \"bus_maps.png\";\n    let shopIcon = icon + \"shopping_maps.png\";\n    let schoolIcon = icon + \"schools.png\";\n    let marketIcon = icon + \"grocery.png\";\n    let house = icon + \"homegardenbusiness.png\";\n    let googleMapsPromise = load_google_maps();\n\n    // let lat = Number(this.state.items[0]?this.state.items[0].lat:null);\n    // let lng = Number(this.state.items[0]?this.state.items[0].lng:null);\n    // console.log(lat);\n\n    let bus = load_bus(lat, lng);\n    let school = load_school(lat, lng);\n    let school2 = load_school2(lat, lng);\n    let market = load_market(lat, lng);\n    let shop = load_shop(lat, lng);\n    Promise.all([googleMapsPromise, bus, school, school2, market, shop]).then(\n      values => {\n        let google = values[0];\n        let venuesA = [];\n        this.google = google;\n        this.markers = [];\n        this.infowindow = new google.maps.InfoWindow();\n        venuesA.push(values[1].response.minivenues);\n        venuesA.push(values[2].response.minivenues);\n        venuesA.push(values[3].response.minivenues);\n        venuesA.push(values[4].response.minivenues);\n        venuesA.push(values[5].response.minivenues);\n        let position = {\n          lat: lat,\n          lng: lng\n        };\n        this.map = new google.maps.Map(document.getElementById(\"map\"), {\n          zoom: 12,\n          scrollwheel: true,\n          center: { lat: lat, lng: lng }\n        });\n\n        venuesA.forEach(venues => {\n          this.venues = venues;\n\n          this.venues.forEach(venue => {\n            if (\n              geolib.getDistance(\n                { latitude: lat, longitude: lng },\n                { latitude: venue.location.lat, longitude: venue.location.lng }\n              ) <= 16000\n            ) {\n              let marker;\n              if (venue.name.includes(\"Bus Stop\")) {\n                if (venue.location.distance < shortestBus.distance) {\n                  shortestBus.name = venue.name;\n                  shortestBus.distance = venue.location.distance;\n                }\n                marker = new google.maps.Marker({\n                  position: {\n                    lat: venue.location.lat,\n                    lng: venue.location.lng\n                  },\n                  map: this.map,\n                  venue: venue,\n                  id: venue.id,\n                  name: venue.name,\n                  animation: google.maps.Animation.DROP,\n                  icon: busIcon\n                });\n              } else if (\n                venue.name.includes(\"Shopping\") &&\n                !venue.name.includes(\"Parking\")\n              ) {\n                if (venue.location.distance < shortestShopping.distance) {\n                  shortestShopping.name = venue.name;\n                  shortestShopping.distance = venue.location.distance;\n                }\n                marker = new google.maps.Marker({\n                  position: {\n                    lat: venue.location.lat,\n                    lng: venue.location.lng\n                  },\n                  map: this.map,\n                  venue: venue,\n                  id: venue.id,\n                  name: venue.name,\n                  animation: google.maps.Animation.DROP,\n                  icon: shopIcon\n                });\n              } else if (venue.name.includes(\"Market\")) {\n                if (venue.location.distance < shortestMarket.distance) {\n                  shortestMarket.name = venue.name;\n                  shortestMarket.distance = venue.location.distance;\n                }\n                marker = new google.maps.Marker({\n                  position: {\n                    lat: venue.location.lat,\n                    lng: venue.location.lng\n                  },\n                  map: this.map,\n                  venue: venue,\n                  id: venue.id,\n                  name: venue.name,\n                  animation: google.maps.Animation.DROP,\n                  icon: marketIcon\n                });\n              } else if (\n                venue.name.includes(\"School\") ||\n                venue.name.includes(\"College\") ||\n                venue.name.includes(\"University\")\n              ) {\n                if (venue.location.distance < shortestSchool.distance) {\n                  {\n                    shortestSchool.name = venue.name;\n                    shortestSchool.distance = venue.location.distance;\n                  }\n                }\n                marker = new google.maps.Marker({\n                  position: {\n                    lat: venue.location.lat,\n                    lng: venue.location.lng\n                  },\n                  map: this.map,\n                  venue: venue,\n                  id: venue.id,\n                  name: venue.name,\n                  animation: google.maps.Animation.DROP,\n                  icon: schoolIcon\n                });\n              } else {\n                if (venue.location.distance < shortestMarket.distance) {\n                  {\n                    shortestMarket.name = venue.name;\n                    shortestMarket.distance = venue.location.distance;\n                  }\n                }\n                marker = new google.maps.Marker({\n                  position: { lat: lat, lng: lng },\n                  map: this.map,\n                  name: \"You are here\",\n                  animation: google.maps.Animation.DROP,\n                  icon: house\n                });\n              }\n              marker.addListener(\"click\", () => {\n                if (marker.getAnimation() !== null) {\n                  marker.setAnimation(null);\n                } else {\n                  marker.setAnimation(google.maps.Animation.BOUNCE);\n                }\n                setTimeout(() => {\n                  marker.setAnimation(null);\n                }, 1500);\n              });\n              google.maps.event.addListener(marker, \"click\", () => {\n                this.infowindow.setContent(marker.name);\n                this.map.setCenter(marker.position);\n                this.infowindow.open(this.map, marker);\n                this.map.panBy(0, -125);\n              });\n              this.markers.push(marker);\n            }\n          });\n          console.log(shortestShopping);\n        });\n      }\n    );\n    return (\n      <div className=\"Map\">\n        <div className=\"TopBar\">\n          <NavBars />\n        </div>\n        <div className=\"mapDeatil\">\n          <Row>\n            <Col className=\"GoogleMap\" id=\"map\" lg={10} />\n            <Col lg={2}>\n              <h2>Nearby Location</h2>\n              <Table striped bordered hover>\n                <thead>\n                  <tr>\n                    <th>Name</th>\n                    <th>Distance</th>\n                  </tr>\n                </thead>\n                <tbody>\n                  <tr>\n                    <td>{shortestSchool.name}</td>\n                    <td>{convertToMile(shortestSchool.distance)} miles</td>\n                  </tr>\n                  <tr>\n                    <td>{shortestBus.name}</td>\n                    <td>{convertToMile(shortestBus.distance)} miles</td>\n                  </tr>\n                  <tr>\n                    <td>{shortestMarket.name}</td>\n                    <td>{convertToMile(shortestMarket.distance)} miles</td>\n                  </tr>\n                  <tr>\n                    <td>{shortestShopping.name}</td>\n                    <td>{convertToMile(shortestShopping.distance)} miles</td>\n                  </tr>\n                </tbody>\n              </Table>\n            </Col>\n          </Row>\n        </div>\n      </div>\n    );\n  }\n}\n\nfunction convertToMile(distance) {\n  return parseFloat((Number(distance) * 0.00062137).toFixed(2));\n}\n\nexport default withFirebase(MapPage);\n"]},"metadata":{},"sourceType":"module"}