{"ast":null,"code":"import _defineProperty from \"C:\\\\Users\\\\nguye\\\\Downloads\\\\New folder\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";\nimport _objectSpread from \"C:\\\\Users\\\\nguye\\\\Downloads\\\\New folder\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread\";\nimport _classCallCheck from \"C:\\\\Users\\\\nguye\\\\Downloads\\\\New folder\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:\\\\Users\\\\nguye\\\\Downloads\\\\New folder\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"C:\\\\Users\\\\nguye\\\\Downloads\\\\New folder\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"C:\\\\Users\\\\nguye\\\\Downloads\\\\New folder\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"C:\\\\Users\\\\nguye\\\\Downloads\\\\New folder\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"C:\\\\Users\\\\nguye\\\\Downloads\\\\New folder\\\\src\\\\components\\\\SignIn\\\\SignInForm.js\";\nimport React, { Component } from \"react\";\nimport { withRouter } from \"react-router-dom\";\nimport { compose } from \"recompose\";\nimport { withFirebase } from \"../../server/Firebase/index\";\nimport * as ROUTES from \"../../constants/routes\";\nimport GoogleButton from \"react-google-button\";\nimport Form from \"react-bootstrap/Form\";\nimport { Link } from \"react-router-dom\";\nimport Button from \"react-bootstrap/Button\";\nimport { PasswordForgotLink } from \"../PasswordForget\";\nimport * as SCHEMA from \"../../constants/schema\";\nimport './signinform.css';\nimport Col from \"react-bootstrap/Col\";\nimport Row from \"react-bootstrap/Row\";\nvar ERROR_CODE_ACCOUNT_EXISTS = \"auth/account-exists-with-different-credential\";\nvar ERROR_MSG_ACCOUNT_EXISTS = \"\\nAn account with an E-Mail address to\\nthis social account already exists. Try to login from\\nthis account instead and associate your social accounts on\\nyour personal account page.\\n\";\nvar ERROR_CODE_POPUP_REQUEST = \"auth/cancelled-popup-request\";\nvar ERROR_MSG_POPUP_REQUEST = \"Your browser had PopUp block, please add our website\\nto the popup block whitelis\";\nvar USER_INITIAL_STATE = {\n  email: \"\",\n  password: \"\",\n  error: null\n};\n/*\nSign In with Google base\n*/\n\nvar SignInGoogleFormBase =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(SignInGoogleFormBase, _Component);\n\n  function SignInGoogleFormBase(props) {\n    var _this;\n\n    _classCallCheck(this, SignInGoogleFormBase);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(SignInGoogleFormBase).call(this, props));\n\n    _this.onSubmit = function (event) {\n      _this.props.firebase.doSignInWithGoogle().then(function (socialAuthUser) {\n        _this.setState({\n          socialAuthUser: socialAuthUser\n        });\n\n        if (socialAuthUser.additionalUserInfo.isNewUser) {\n          return _this.props.firebase.user(socialAuthUser.user.uid).set({\n            /*\n            TODO: When finished with all the user field, change to general function [event.target.name]: event.target.value\n            */\n            displayName: socialAuthUser.user.displayName,\n            email: socialAuthUser.user.email,\n            isAgent: false,\n            phoneNumber: socialAuthUser.user.phoneNumber,\n            photoURL: socialAuthUser.user.photoURL\n          });\n        } else {\n          return _this.props.firebase.user(socialAuthUser.user.uid);\n        }\n      }).then(function () {\n        if (_this.state.socialAuthUser.additionalUserInfo.isNewUser) {\n          _this.setState({\n            error: null\n          });\n\n          _this.props.history.push(ROUTES.GOOGLEADDINFO);\n        } else {\n          _this.setState({\n            error: null\n          });\n\n          _this.props.history.push(ROUTES.HOME);\n        }\n      }).catch(function (error) {\n        //Check if the new Google Account had been use for normal sign in\n        if (error.code === ERROR_CODE_ACCOUNT_EXISTS) {\n          error.message = ERROR_MSG_ACCOUNT_EXISTS;\n        } else if (error.code === ERROR_CODE_POPUP_REQUEST) {\n          error.message = ERROR_MSG_POPUP_REQUEST;\n        }\n\n        _this.setState({\n          error: error\n        });\n      }); //prevent the page to reload after submit the page\n\n\n      event.preventDefault();\n    };\n\n    _this.state = {\n      socialAuthUser: {},\n      error: null\n    };\n    return _this;\n  }\n  /*\n  Create a user in Firebase database\n  Currently the user gets recreate everytime the user login\n  We can use the condition socialAuthUser.additionalUserInfo.isNewUser for\n  condition checking\n  */\n\n\n  _createClass(SignInGoogleFormBase, [{\n    key: \"render\",\n    value: function render() {\n      var error = this.state.error;\n      return React.createElement(\"div\", {\n        className: \"logingmail\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 105\n        },\n        __self: this\n      }, React.createElement(\"h2\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 106\n        },\n        __self: this\n      }, \"Or Sign In with\"), React.createElement(Form, {\n        onSubmit: this.onSubmit,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 107\n        },\n        __self: this\n      }, React.createElement(GoogleButton, {\n        onClick: this.onSubmit,\n        label: \"Google\",\n        style: {\n          width: \"17vw\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 108\n        },\n        __self: this\n      })));\n    }\n  }]);\n\n  return SignInGoogleFormBase;\n}(Component);\n/*\n  Sign In with Email form base\n  */\n\n\nvar SignInFormBase =\n/*#__PURE__*/\nfunction (_Component2) {\n  _inherits(SignInFormBase, _Component2);\n\n  function SignInFormBase(props) {\n    var _this2;\n\n    _classCallCheck(this, SignInFormBase);\n\n    _this2 = _possibleConstructorReturn(this, _getPrototypeOf(SignInFormBase).call(this, props));\n\n    _this2.onSubmit = function (event) {\n      var _this2$state = _this2.state,\n          email = _this2$state.email,\n          password = _this2$state.password;\n\n      _this2.props.firebase.doSignInWithEmailAndPassword(email, password).then(function () {\n        _this2.setState(_objectSpread({}, USER_INITIAL_STATE));\n\n        _this2.props.history.push(ROUTES.HOMEPAGE);\n      }).catch(function (error) {\n        _this2.setState({\n          error: error\n        });\n      });\n\n      event.preventDefault();\n    };\n\n    _this2.onChange = function (event) {\n      _this2.setState(_defineProperty({}, event.target.name, event.target.value));\n    };\n\n    _this2.state = _objectSpread({}, USER_INITIAL_STATE);\n    return _this2;\n  }\n\n  _createClass(SignInFormBase, [{\n    key: \"render\",\n    value: function render() {\n      var _this$state = this.state,\n          email = _this$state.email,\n          password = _this$state.password,\n          error = _this$state.error;\n      var isInvalid = password === \"\" || email === \"\";\n      return React.createElement(\"div\", {\n        className: \"SignInForm\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 156\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 157\n        },\n        __self: this\n      }, React.createElement(\"h1\", {\n        className: \"signIn\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 158\n        },\n        __self: this\n      }, \"Sign In\"), React.createElement(Form, {\n        name: \"form\",\n        onSubmit: this.onSubmit,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 159\n        },\n        __self: this\n      }, React.createElement(Form.Group, {\n        as: Row,\n        controlId: \"formPlaintextEmail\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 160\n        },\n        __self: this\n      }, React.createElement(Form.Label, {\n        column: true,\n        sm: \"2\",\n        className: \"theLabel\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 161\n        },\n        __self: this\n      }, \"Email: \"), React.createElement(Col, {\n        sm: \"8\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 162\n        },\n        __self: this\n      }, React.createElement(Form.Control, {\n        className: \"theFormControl\",\n        onChange: this.onChange,\n        type: \"email\",\n        name: \"email\",\n        value: email,\n        placeholder: \"Enter email\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 163\n        },\n        __self: this\n      }))), React.createElement(Form.Group, {\n        as: Row,\n        controlId: \"formPlaintextEmail\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 174\n        },\n        __self: this\n      }, React.createElement(Form.Label, {\n        column: true,\n        sm: \"2\",\n        className: \"theLabel\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 175\n        },\n        __self: this\n      }, \"Password: \"), React.createElement(Col, {\n        sm: \"8\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 176\n        },\n        __self: this\n      }, React.createElement(Form.Control, {\n        className: \"theFormControl\",\n        onChange: this.onChange,\n        type: \"password\",\n        name: \"password\",\n        value: password,\n        placeholder: \"Enter password\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 177\n        },\n        __self: this\n      }))), React.createElement(Button, {\n        disabled: isInvalid,\n        className: \"theButton\",\n        id: \"buttonLogin1\",\n        variant: \"primary\",\n        type: \"submit\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 187\n        },\n        __self: this\n      }, React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 194\n        },\n        __self: this\n      }, \"Login\")), error && React.createElement(\"p\", {\n        className: \"err\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 196\n        },\n        __self: this\n      }, error.message))), React.createElement(\"div\", {\n        className: \"extraOption\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 199\n        },\n        __self: this\n      }, React.createElement(PasswordForgotLink, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 200\n        },\n        __self: this\n      }), React.createElement(\"h5\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 201\n        },\n        __self: this\n      }, \"Don't Have an Account>\"), React.createElement(Link, {\n        to: ROUTES.SIGN_UP,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 202\n        },\n        __self: this\n      }, React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 203\n        },\n        __self: this\n      }, \"Sign Up\"))));\n    }\n  }]);\n\n  return SignInFormBase;\n}(Component);\n/*\n  Sign in Higher-order component for SignInForm\n  */\n\n\nvar SignInForm = compose(withRouter, withFirebase)(SignInFormBase);\n/*\n  Sign in Higher-order component for SignInGoogle\n  */\n\nvar SignInGoogleForm = compose(withRouter, withFirebase)(SignInGoogleFormBase);\nexport { SignInForm, SignInGoogleForm };\n{\n  /* <div className=\"SignInForm\">\n         <div className=\"form\">\n           <h1 className=\"signIn\">Sign In</h1>\n           <Form name=\"form\" onSubmit={this.onSubmit}>\n              <Form.Label className=\"theLabel\">Email address</Form.Label>\n             <Form.Control\n               className=\"theFormControl\"\n               onChange={this.onChange}\n               type=\"email\"\n               name=\"email\"\n               value={email}\n               placeholder=\"Enter email\"\n             />\n             <Form.Label className=\"theLabel\">Password</Form.Label>\n             <Form.Control\n               className=\"theFormControl\"\n               onChange={this.onChange}\n               type=\"password\"\n               name=\"password\"\n               value={password}\n               placeholder=\"Enter password\"\n             />\n              <Button\n               disabled={isInvalid}\n               className=\"theButton\"\n               id=\"buttonLogin1\"\n               variant=\"primary\"\n               type=\"submit\"\n             >\n               <p>Login</p>\n             </Button>\n             {error && <p className=\"err\" >{error.message}</p>}\n           </Form>\n         </div>\n         <div className=\"extraOption\">\n           <PasswordForgotLink />\n           <h5>Don't Have an Account></h5>\n           <Link to={ROUTES.SIGN_UP}>\n             <p>Sign Up</p>\n           </Link>\n         </div>\n       </div> */\n}","map":{"version":3,"sources":["C:\\Users\\nguye\\Downloads\\New folder\\src\\components\\SignIn\\SignInForm.js"],"names":["React","Component","withRouter","compose","withFirebase","ROUTES","GoogleButton","Form","Link","Button","PasswordForgotLink","SCHEMA","Col","Row","ERROR_CODE_ACCOUNT_EXISTS","ERROR_MSG_ACCOUNT_EXISTS","ERROR_CODE_POPUP_REQUEST","ERROR_MSG_POPUP_REQUEST","USER_INITIAL_STATE","email","password","error","SignInGoogleFormBase","props","onSubmit","event","firebase","doSignInWithGoogle","then","socialAuthUser","setState","additionalUserInfo","isNewUser","user","uid","set","displayName","isAgent","phoneNumber","photoURL","state","history","push","GOOGLEADDINFO","HOME","catch","code","message","preventDefault","width","SignInFormBase","doSignInWithEmailAndPassword","HOMEPAGE","onChange","target","name","value","isInvalid","SIGN_UP","SignInForm","SignInGoogleForm"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport { withRouter } from \"react-router-dom\";\nimport { compose } from \"recompose\";\nimport { withFirebase } from \"../../server/Firebase/index\";\nimport * as ROUTES from \"../../constants/routes\";\n\nimport GoogleButton from \"react-google-button\";\n\nimport Form from \"react-bootstrap/Form\";\nimport { Link } from \"react-router-dom\";\nimport Button from \"react-bootstrap/Button\";\n\nimport { PasswordForgotLink } from \"../PasswordForget\";\nimport * as SCHEMA from \"../../constants/schema\";\nimport './signinform.css';\n\n\nimport Col from \"react-bootstrap/Col\";\nimport Row from \"react-bootstrap/Row\";\n\n\n\nconst ERROR_CODE_ACCOUNT_EXISTS =\n  \"auth/account-exists-with-different-credential\";\n\nconst ERROR_MSG_ACCOUNT_EXISTS = `\nAn account with an E-Mail address to\nthis social account already exists. Try to login from\nthis account instead and associate your social accounts on\nyour personal account page.\n`;\n\nconst ERROR_CODE_POPUP_REQUEST = \"auth/cancelled-popup-request\";\n\nconst ERROR_MSG_POPUP_REQUEST = `Your browser had PopUp block, please add our website\nto the popup block whitelis`;\n\nconst USER_INITIAL_STATE = {\n  email: \"\",\n  password: \"\",\n  error: null\n};\n\n/*\nSign In with Google base\n*/\nclass SignInGoogleFormBase extends Component {\n  constructor(props) {\n    super(props);\n    this.state = { socialAuthUser: {}, error: null };\n  }\n\n  /*\n  Create a user in Firebase database\n  Currently the user gets recreate everytime the user login\n  We can use the condition socialAuthUser.additionalUserInfo.isNewUser for\n  condition checking\n  */\n  onSubmit = event => {\n    this.props.firebase\n      .doSignInWithGoogle()\n      .then(socialAuthUser => {\n        this.setState({ socialAuthUser: socialAuthUser });\n        if (socialAuthUser.additionalUserInfo.isNewUser) {\n          return this.props.firebase.user(socialAuthUser.user.uid).set({\n            /*\n          TODO: When finished with all the user field, change to general function [event.target.name]: event.target.value\n          */\n            displayName: socialAuthUser.user.displayName,\n            email: socialAuthUser.user.email,\n            isAgent: false,\n            phoneNumber: socialAuthUser.user.phoneNumber,\n            photoURL: socialAuthUser.user.photoURL\n          });\n        } else {\n          return this.props.firebase.user(socialAuthUser.user.uid);\n        }\n      })\n      .then(() => {\n        if (this.state.socialAuthUser.additionalUserInfo.isNewUser) {\n          this.setState({ error: null });\n          this.props.history.push(ROUTES.GOOGLEADDINFO);\n        } else {\n          this.setState({ error: null });\n          this.props.history.push(ROUTES.HOME);\n        }\n      })\n      .catch(error => {\n        //Check if the new Google Account had been use for normal sign in\n        if (error.code === ERROR_CODE_ACCOUNT_EXISTS) {\n          error.message = ERROR_MSG_ACCOUNT_EXISTS;\n        } else if (error.code === ERROR_CODE_POPUP_REQUEST) {\n          error.message = ERROR_MSG_POPUP_REQUEST;\n        }\n\n        this.setState({ error });\n      });\n    //prevent the page to reload after submit the page\n    event.preventDefault();\n  };\n  render() {\n    const { error } = this.state;\n\n    return (\n      <div className=\"logingmail\">\n        <h2>Or Sign In with</h2>\n        <Form onSubmit={this.onSubmit}>\n          <GoogleButton\n            onClick={this.onSubmit}\n            label=\"Google\"\n            style={{ width: \"17vw\" }}\n          />\n          {/* {error && <p>{error.message}</p>} */}\n        </Form>\n      </div>\n    );\n  }\n}\n\n/*\n  Sign In with Email form base\n  */\nclass SignInFormBase extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = { ...USER_INITIAL_STATE };\n  }\n\n  onSubmit = event => {\n    const { email, password } = this.state;\n\n    this.props.firebase\n      .doSignInWithEmailAndPassword(email, password)\n      .then(() => {\n        this.setState({ ...USER_INITIAL_STATE });\n        this.props.history.push(ROUTES.HOMEPAGE);\n      })\n      .catch(error => {\n        this.setState({ error });\n      });\n\n    event.preventDefault();\n  };\n\n  onChange = event => {\n    this.setState({ [event.target.name]: event.target.value });\n  };\n\n  render() {\n    const { email, password, error } = this.state;\n\n    const isInvalid = password === \"\" || email === \"\";\n\n    return (\n      <div className=\"SignInForm\">\n        <div >\n          <h1 className=\"signIn\">Sign In</h1>\n          <Form name=\"form\" onSubmit={this.onSubmit}>\n          <Form.Group as={Row} controlId=\"formPlaintextEmail\">\n            <Form.Label column sm=\"2\" className=\"theLabel\">Email: </Form.Label>\n            <Col sm=\"8\">\n            <Form.Control\n              className=\"theFormControl\"\n              onChange={this.onChange}\n              type=\"email\"\n              name=\"email\"\n              value={email}\n              placeholder=\"Enter email\"\n            />\n          </Col>\n          </Form.Group>\n\n          <Form.Group as={Row} controlId=\"formPlaintextEmail\">\n            <Form.Label column sm=\"2\" className=\"theLabel\">Password: </Form.Label>\n            <Col sm=\"8\">\n            <Form.Control\n              className=\"theFormControl\"\n              onChange={this.onChange}\n              type=\"password\"\n              name=\"password\"\n              value={password}\n              placeholder=\"Enter password\"\n            />\n            </Col>\n            </Form.Group>\n            <Button\n              disabled={isInvalid}\n              className=\"theButton\"\n              id=\"buttonLogin1\"\n              variant=\"primary\"\n              type=\"submit\"\n            >\n              <p>Login</p>\n            </Button>\n            {error && <p className=\"err\" >{error.message}</p>}\n          </Form>\n        </div>\n        <div className=\"extraOption\">\n          <PasswordForgotLink />\n          <h5>Don't Have an Account></h5>\n          <Link to={ROUTES.SIGN_UP}>\n            <p>Sign Up</p>\n          </Link>\n        </div>\n      </div>\n    );\n  }\n}\n/*\n  Sign in Higher-order component for SignInForm\n  */\nconst SignInForm = compose(\n  withRouter,\n  withFirebase\n)(SignInFormBase);\n\n/*\n  Sign in Higher-order component for SignInGoogle\n  */\nconst SignInGoogleForm = compose(\n  withRouter,\n  withFirebase\n)(SignInGoogleFormBase);\n\nexport { SignInForm, SignInGoogleForm };\n\n\n\n{/* <div className=\"SignInForm\">\n        <div className=\"form\">\n          <h1 className=\"signIn\">Sign In</h1>\n          <Form name=\"form\" onSubmit={this.onSubmit}>\n\n            <Form.Label className=\"theLabel\">Email address</Form.Label>\n            <Form.Control\n              className=\"theFormControl\"\n              onChange={this.onChange}\n              type=\"email\"\n              name=\"email\"\n              value={email}\n              placeholder=\"Enter email\"\n            />\n            <Form.Label className=\"theLabel\">Password</Form.Label>\n            <Form.Control\n              className=\"theFormControl\"\n              onChange={this.onChange}\n              type=\"password\"\n              name=\"password\"\n              value={password}\n              placeholder=\"Enter password\"\n            />\n\n            <Button\n              disabled={isInvalid}\n              className=\"theButton\"\n              id=\"buttonLogin1\"\n              variant=\"primary\"\n              type=\"submit\"\n            >\n              <p>Login</p>\n            </Button>\n            {error && <p className=\"err\" >{error.message}</p>}\n          </Form>\n        </div>\n        <div className=\"extraOption\">\n          <PasswordForgotLink />\n          <h5>Don't Have an Account></h5>\n          <Link to={ROUTES.SIGN_UP}>\n            <p>Sign Up</p>\n          </Link>\n        </div>\n      </div> */}\n"]},"metadata":{},"sourceType":"module"}